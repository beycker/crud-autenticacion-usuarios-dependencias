(function(a){function e(e){for(var i,r,o=e[0],l=e[1],c=e[2],d=0,p=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&p.push(s[r][0]),s[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(a[i]=l[i]);u&&u(e);while(p.length)p.shift()();return n.push.apply(n,c||[]),t()}function t(){for(var a,e=0;e<n.length;e++){for(var t=n[e],i=!0,o=1;o<t.length;o++){var l=t[o];0!==s[l]&&(i=!1)}i&&(n.splice(e--,1),a=r(r.s=t[0]))}return a}var i={},s={app:0},n=[];function r(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return a[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=a,r.c=i,r.d=function(a,e,t){r.o(a,e)||Object.defineProperty(a,e,{enumerable:!0,get:t})},r.r=function(a){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},r.t=function(a,e){if(1&e&&(a=r(a)),8&e)return a;if(4&e&&"object"===typeof a&&a&&a.__esModule)return a;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:a}),2&e&&"string"!=typeof a)for(var i in a)r.d(t,i,function(e){return a[e]}.bind(null,i));return t},r.n=function(a){var e=a&&a.__esModule?function(){return a["default"]}:function(){return a};return r.d(e,"a",e),e},r.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)},r.p="/crud-autenticacion-usuarios-dependencias/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;n.push([0,"chunk-vendors"]),t()})({0:function(a,e,t){a.exports=t("56d7")},"174b":function(a,e,t){"use strict";var i=t("a659"),s=t.n(i);s.a},"39b9":function(a,e,t){},"4fda":function(a,e,t){},"56d7":function(a,e,t){"use strict";t.r(e);t("e260"),t("e6cf"),t("cca6"),t("a79d");var i=t("2b0e"),s=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{attrs:{id:"app"}},[t("div",{attrs:{id:"nav"}},[t("Navigation")],1),t("router-view")],1)},n=[],r=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("nav",{staticClass:"navbar",attrs:{role:"navigation","aria-label":"main navigation"}},[t("div",{staticClass:"navbar-brand"},[t("router-link",{staticClass:"navbar-item",attrs:{to:"/"}},[t("h3",{staticClass:"title is-3"},[a._v("MyApp")])]),t("a",{staticClass:"navbar-burger burger",class:{"is-active":a.isOpen},attrs:{role:"button","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample"},on:{click:function(e){return e.preventDefault(),a.toggleMenu(e)}}},[t("span",{attrs:{"aria-hidden":"true"}}),t("span",{attrs:{"aria-hidden":"true"}}),t("span",{attrs:{"aria-hidden":"true"}})])],1),t("div",{staticClass:"navbar-menu",class:{"is-active":a.isOpen},attrs:{id:"navbarBasicExample"}},[t("div",{staticClass:"navbar-start"},[t("router-link",{staticClass:"navbar-item",attrs:{to:"/"}},[a._v(" Home ")])],1),t("div",{staticClass:"navbar-end"},[t("div",{staticClass:"navbar-item"},[a.user?[t("div",{staticClass:"navbar-item has-dropdown is-hoverable"},[t("a",{staticClass:"navbar-link"},[a._v(" "+a._s(a.user.displayName||a.user.email)+" ")]),t("div",{staticClass:"navbar-dropdown"},[t("router-link",{staticClass:"navbar-item",attrs:{to:"/dependencias"}},[a._v(" Dependencias ")]),t("router-link",{staticClass:"navbar-item",attrs:{to:"/usuarios"}},[a._v(" Usuarios ")]),t("a",{staticClass:"navbar-item",on:{click:function(e){return e.preventDefault(),a.logout(e)}}},[a._v(" Cerrar sesion ")])],1)])]:[t("div",{staticClass:"buttons"},[t("router-link",{staticClass:"button is-primary",attrs:{to:"/register"}},[t("strong",[a._v("Registrarme")])]),t("router-link",{staticClass:"button is-light",attrs:{to:"/login"}},[a._v(" Iniciar sesion ")])],1)]],2)])])])},o=[],l=t("8aa5"),c=t.n(l),u={data:function(){return{isOpen:!1,user:null}},methods:{toggleMenu:function(){var a=!this.isOpen;this.isOpen=a},logout:function(){var a=this;c.a.auth().signOut().then((function(){a.$router.push({name:"login"})}))}},created:function(){var a=this;c.a.auth().onAuthStateChanged((function(e){a.user=e||null}))}},d=u,p=t("2877"),v=Object(p["a"])(d,r,o,!1,null,null,null),m=v.exports,f={components:{Navigation:m}},b=f,h=(t("5c0b"),Object(p["a"])(b,s,n,!1,null,null,null)),C=h.exports,_=(t("45fc"),t("8c4f")),g=function(){var a=this,e=a.$createElement;a._self._c;return a._m(0)},x=[function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",[t("h1",{staticClass:"title is-1",attrs:{align:"center"}},[a._v("¡Bienvenido al sistema!")])])}],w={name:"home",components:{}},y=w,A=(t("174b"),Object(p["a"])(y,g,x,!1,null,"5d5eedb2",null)),N=A.exports,D=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"container mt-50"},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-6 is-offset-3"},[t("h3",{staticClass:"title is-3"},[a._v("Iniciar sesion")]),t("hr"),t("form",{attrs:{action:"#"},on:{submit:function(e){return e.preventDefault(),a.login(e)}}},[t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("Email")]),t("div",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.email,expression:"email"}],staticClass:"input",attrs:{type:"email",placeholder:"e.g. alexsmith@gmail.com"},domProps:{value:a.email},on:{input:function(e){e.target.composing||(a.email=e.target.value)}}})])]),t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("Contraseña")]),t("div",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.password,expression:"password"}],staticClass:"input",attrs:{type:"password"},domProps:{value:a.password},on:{input:function(e){e.target.composing||(a.password=e.target.value)}}})])]),t("button",{staticClass:"button is-primary",attrs:{type:"submit"}},[a._v("Iniciar sesion")])]),a.error?t("div",{staticClass:"notification is-danger mt-10"},[a._v(" "+a._s(a.error)+" ")]):a._e()])])])},$=[],E={data:function(){return{email:"",password:"",error:"",prueba:{nombre:"p1",apellido:"p2"}}},name:"Login",methods:{login:function(){var a=this;this.error="",this.email&&this.password?c.a.auth().signInWithEmailAndPassword(this.email,this.password).then((function(e){console.log(e),a.$router.push({name:"home",params:{mensaje:a.prueba}})})).catch((function(e){a.error=e.message})):this.error="Todos los campos son requeridos"}}},k=E,P=Object(p["a"])(k,D,$,!1,null,null,null),O=P.exports,j=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"container mt-50"},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-6 is-offset-3"},[t("h3",{staticClass:"title is-3"},[a._v("Crear una cuenta")]),t("hr"),t("form",{attrs:{action:"#"},on:{submit:function(e){return e.preventDefault(),a.register(e)}}},[t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("Nombres")]),t("div",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.usuario.nombres,expression:"usuario.nombres"}],staticClass:"input",attrs:{type:"text",placeholder:"e.g Alex Smith"},domProps:{value:a.usuario.nombres},on:{input:function(e){e.target.composing||a.$set(a.usuario,"nombres",e.target.value)}}})])]),t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("Apellidos")]),t("div",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.usuario.apellidos,expression:"usuario.apellidos"}],staticClass:"input",attrs:{type:"text",placeholder:"e.g. alexsmith@gmail.com"},domProps:{value:a.usuario.apellidos},on:{input:function(e){e.target.composing||a.$set(a.usuario,"apellidos",e.target.value)}}})])]),t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("Email")]),t("div",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.usuario.email,expression:"usuario.email"}],staticClass:"input",attrs:{type:"email",placeholder:"e.g. alexsmith@gmail.com"},domProps:{value:a.usuario.email},on:{input:function(e){e.target.composing||a.$set(a.usuario,"email",e.target.value)}}})])]),t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("Contraseña")]),t("div",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.usuario.password,expression:"usuario.password"}],staticClass:"input",attrs:{type:"password",placeholder:"e.g. alexsmith@gmail.com"},domProps:{value:a.usuario.password},on:{input:function(e){e.target.composing||a.$set(a.usuario,"password",e.target.value)}}})])]),t("button",{staticClass:"button is-primary",attrs:{type:"submit"}},[a._v("Registrarme")])]),a.error?t("div",{staticClass:"notification is-danger mt-10"},[a._v(" "+a._s(a.error)+" ")]):a._e()])])])},U=[],S={apiKey:"AIzaSyBqeJnN3IQdiOSLaZ3Vbgdn3dDniPvqwjs",authDomain:"crudautenticacion.firebaseapp.com",databaseURL:"https://crudautenticacion.firebaseio.com",projectId:"crudautenticacion",storageBucket:"crudautenticacion.appspot.com",messagingSenderId:"525866673441",appId:"1:525866673441:web:cb2dda10e5099b45d14a60"},R=c.a.initializeApp(S);R.firestore().settings({timestampsInSnapshots:!0});var B=R.firestore(),q={data:function(){return{name:"",email:"",password:"",error:"",ref:B.collection("users"),usuario:{}}},name:"Register",methods:{register:function(){var a=this;this.error="",this.usuario.nombres&&this.usuario.apellidos&&this.usuario.email&&this.usuario.password?c.a.auth().createUserWithEmailAndPassword(this.usuario.email,this.usuario.password).then((function(e){e&&a.ref.add(a.usuario).then((function(e){console.log(e),a.usuario.nombres="",a.usuario.apellidos="",a.usuario.email="",a.usuario.password="",a.$router.push({name:"home"})}))})).catch((function(e){a.error=e.message})):this.error="Todos los campos son requeridos"}}},I=q,M=Object(p["a"])(I,j,U,!1,null,null,null),z=M.exports,L=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{attrs:{id:"app"}},[t("div",{staticClass:"tabs"},[t("ul",[t("li",{class:{"is-active":"pictures"==a.isActive}},[t("a",{on:{click:function(e){a.isActive="pictures"}}},[a._v("Crear Dependencia")])]),t("li",{class:{"is-active":"music"==a.isActive}},[t("a",{on:{click:function(e){a.isActive="music"}}},[a._v("Listar Dependencias")])])])]),t("div",{staticClass:"tab-contents"},[t("div",{staticClass:"content",class:{"is-active":"pictures"==a.isActive}},[t("div",{staticClass:"container mt-50"},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-6 is-offset-3"},[t("h3",{staticClass:"title is-3"},[a._v("Crear una dependencia")]),t("hr"),t("form",{attrs:{action:"#"},on:{submit:function(e){return e.preventDefault(),a.register(e)}}},[t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("Nombre dependencia")]),t("div",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.dependencia.nombre,expression:"dependencia.nombre"}],staticClass:"input",attrs:{type:"text",placeholder:"e.g Alex Smith"},domProps:{value:a.dependencia.nombre},on:{input:function(e){e.target.composing||a.$set(a.dependencia,"nombre",e.target.value)}}})])]),t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("Coordinador")]),t("div",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.dependencia.coordinador,expression:"dependencia.coordinador"}],staticClass:"input",attrs:{type:"text",placeholder:"e.g. alexsmith@gmail.com"},domProps:{value:a.dependencia.coordinador},on:{input:function(e){e.target.composing||a.$set(a.dependencia,"coordinador",e.target.value)}}})])]),t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("Maximo numero de usuarios")]),t("div",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.dependencia.maximo,expression:"dependencia.maximo"}],staticClass:"input",attrs:{type:"text",placeholder:"e.g. alexsmith@gmail.com"},domProps:{value:a.dependencia.maximo},on:{input:function(e){e.target.composing||a.$set(a.dependencia,"maximo",e.target.value)}}})])]),t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("Ubicación")]),t("div",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.dependencia.ubicacion,expression:"dependencia.ubicacion"}],staticClass:"input",attrs:{type:"text",placeholder:"e.g. alexsmith@gmail.com"},domProps:{value:a.dependencia.ubicacion},on:{input:function(e){e.target.composing||a.$set(a.dependencia,"ubicacion",e.target.value)}}})])]),t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("Activa?")]),t("div",{staticClass:"select"},[t("select",{directives:[{name:"model",rawName:"v-model",value:a.dependencia.activa,expression:"dependencia.activa"}],on:{change:function(e){var t=Array.prototype.filter.call(e.target.options,(function(a){return a.selected})).map((function(a){var e="_value"in a?a._value:a.value;return e}));a.$set(a.dependencia,"activa",e.target.multiple?t:t[0])}}},[t("option",[a._v("Si")]),t("option",[a._v("No")])])])]),t("button",{staticClass:"button is-primary",attrs:{type:"submit"}},[a._v("Crear")])]),a.error?t("div",{staticClass:"notification is-danger mt-10"},[a._v(" "+a._s(a.error)+" ")]):a._e()])])])]),t("div",{staticClass:"content",class:{"is-active":"music"==a.isActive}},[t("table",{staticClass:"table"},[a._m(0),t("tbody",a._l(a.dependencias,(function(e){return t("tr",{key:e.nombre},[t("td",[a._v(a._s(e.nombre))]),t("td",[a._v(a._s(e.coordinador))]),t("td",[a._v(a._s(e.maximo))]),t("td",[a._v(a._s(e.ubicacion))]),t("td",[a._v(a._s(e.activa))]),t("td",[t("button",{staticClass:"button is-primary",attrs:{type:"submit"},on:{click:function(t){return t.preventDefault(),a.detalle(e)}}},[a._v("Detalle")])]),t("td",[t("button",{staticClass:"button is-primary",attrs:{type:"submit"},on:{click:function(t){return t.preventDefault(),a.editar(e)}}},[a._v("Editar")])]),t("td",[t("button",{staticClass:"button is-primary",attrs:{type:"submit"},on:{click:function(t){return t.preventDefault(),a.eliminar(e)}}},[a._v("Eliminar")])])])})),0)]),a.error?t("div",{staticClass:"notification is-danger mt-10"},[a._v(" "+a._s(a.error)+" ")]):a._e()])])])},T=[function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("thead",[t("tr",[t("th",[a._v("Dependencia")]),t("th",[a._v("Coordinador")]),t("th",[a._v("Máximo # de usuarios")]),t("th",[a._v("Ubicación")]),t("th",[a._v("Activa")]),t("th",[a._v("Detalle")]),t("th",[a._v("Editar")]),t("th",[a._v("Eliminar")])])])}],V=(t("4160"),t("a434"),t("159b"),t("96cf"),t("1da1")),J={data:function(){return{isActive:"pictures",ref:B.collection("dependencias"),dependencia:{nombre:"",coordinador:"",maximo:"",ubicacion:"",activa:!1,users:[]},dependencias:[],error:""}},name:"Dependencias",created:function(){this.listarDependencias()},methods:{listarDependencias:function(){var a=this;return Object(V["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.ref.get();case 3:t=e.sent,a.dependencias.splice(0,a.dependencias.length),t.forEach((function(e){var t={id:e.id,nombre:e.data().nombre,coordinador:e.data().coordinador,maximo:e.data().maximo,ubicacion:e.data().ubicacion,activa:e.data().activa,users:e.data().users};a.dependencias.push(t)})),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},register:function(){var a=this;this.error="",this.dependencia.nombre&&this.dependencia.coordinador&&this.dependencia.maximo&&this.dependencia.ubicacion?("Si"===this.dependencia.activa?this.dependencia.activa=!0:this.dependencia.activa=!1,this.ref.add(this.dependencia).then((function(e){console.log(e),a.dependencia.nombre="",a.dependencia.coordinador="",a.dependencia.maximo="",a.dependencia.ubicacion="",a.dependencia.activa=""})),this.listarDependencias()):this.error="Todos los campos son requeridos"},detalle:function(a){this.$router.push({name:"detalle",params:{dependenciaactual:a}})},editar:function(a){this.$router.push({name:"editar",params:{dependenciaactual:a}})},eliminar:function(a){console.log(a),0===a.users.length?(console.log("Se puede eliminar"),this.ref.doc(a.id).delete(),this.listarDependencias()):this.error="Tiene usuarios asociados"}},props:{mensaje:{}}},W=J,H=(t("80ad"),Object(p["a"])(W,L,T,!1,null,"79bd7529",null)),K=H.exports,Q=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{attrs:{id:"app"}},[t("div",{staticClass:"tabs"},[t("ul",[t("li",{class:{"is-active":"pictures"==a.isActive}},[t("a",{on:{click:function(e){a.isActive="pictures"}}},[a._v("Crear Usuarios")])]),t("li",{class:{"is-active":"music"==a.isActive}},[t("a",{on:{click:function(e){a.isActive="music"}}},[a._v("Listar Usuarios")])])])]),t("div",{staticClass:"tab-contents"},[t("div",{staticClass:"content",class:{"is-active":"pictures"==a.isActive}},[t("div",{staticClass:"container mt-50"},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-6 is-offset-3"},[t("h3",{staticClass:"title is-3"},[a._v("Crear un usuario")]),t("hr"),t("form",{attrs:{action:"#"},on:{submit:function(e){return e.preventDefault(),a.register(e)}}},[t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("Nombres")]),t("div",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.usuario.nombres,expression:"usuario.nombres"}],staticClass:"input",attrs:{type:"text",placeholder:"e.g Alex Smith"},domProps:{value:a.usuario.nombres},on:{input:function(e){e.target.composing||a.$set(a.usuario,"nombres",e.target.value)}}})])]),t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("Apellidos")]),t("div",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.usuario.apellidos,expression:"usuario.apellidos"}],staticClass:"input",attrs:{type:"text",placeholder:"e.g. alexsmith@gmail.com"},domProps:{value:a.usuario.apellidos},on:{input:function(e){e.target.composing||a.$set(a.usuario,"apellidos",e.target.value)}}})])]),t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("Email")]),t("div",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.usuario.email,expression:"usuario.email"}],staticClass:"input",attrs:{type:"email",placeholder:"e.g. alexsmith@gmail.com"},domProps:{value:a.usuario.email},on:{input:function(e){e.target.composing||a.$set(a.usuario,"email",e.target.value)}}})])]),t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("Contraseña")]),t("div",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.usuario.password,expression:"usuario.password"}],staticClass:"input",attrs:{type:"password",placeholder:"e.g. alexsmith@gmail.com"},domProps:{value:a.usuario.password},on:{input:function(e){e.target.composing||a.$set(a.usuario,"password",e.target.value)}}})])]),t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("Valido hasta")]),t("div",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.usuario.validohasta,expression:"usuario.validohasta"}],staticClass:"input",attrs:{type:"text",placeholder:"e.g. alexsmith@gmail.com"},domProps:{value:a.usuario.validohasta},on:{input:function(e){e.target.composing||a.$set(a.usuario,"validohasta",e.target.value)}}})])]),t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("Dependencia")]),t("div",{staticClass:"select"},[t("select",{directives:[{name:"model",rawName:"v-model",value:a.usuario.dependencia,expression:"usuario.dependencia"}],on:{change:function(e){var t=Array.prototype.filter.call(e.target.options,(function(a){return a.selected})).map((function(a){var e="_value"in a?a._value:a.value;return e}));a.$set(a.usuario,"dependencia",e.target.multiple?t:t[0])}}},a._l(a.dependencias,(function(e){return t("option",{key:e.id},[a._v(a._s(e.nombre))])})),0)])]),t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("Activo")]),t("div",{staticClass:"select"},[t("select",{directives:[{name:"model",rawName:"v-model",value:a.usuario.activo,expression:"usuario.activo"}],on:{change:function(e){var t=Array.prototype.filter.call(e.target.options,(function(a){return a.selected})).map((function(a){var e="_value"in a?a._value:a.value;return e}));a.$set(a.usuario,"activo",e.target.multiple?t:t[0])}}},[t("option",[a._v("Si")]),t("option",[a._v("No")])])])]),t("button",{staticClass:"button is-primary",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),a.register()}}},[a._v("Crear")])]),a.error?t("div",{staticClass:"notification is-danger mt-10"},[a._v(" "+a._s(a.error)+" ")]):a._e()])])])]),t("div",{staticClass:"content",class:{"is-active":"music"==a.isActive}},[t("div",{staticClass:"field has-addons has-addons-centered"},[t("p",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.search,expression:"search"}],staticClass:"input",attrs:{type:"text",placeholder:"Por ejemplo Andrés"},domProps:{value:a.search},on:{input:function(e){e.target.composing||(a.search=e.target.value)}}})]),t("p",{staticClass:"control"},[t("a",{staticClass:"button is-primary",on:{click:function(e){return e.preventDefault(),a.filtrarUsuariosN()}}},[a._v(" Buscar por nombre ")])])]),t("div",{staticClass:"field has-addons has-addons-centered"},[t("p",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.searchd,expression:"searchd"}],staticClass:"input",attrs:{type:"text",placeholder:"Por ejemplo Ventas"},domProps:{value:a.searchd},on:{input:function(e){e.target.composing||(a.searchd=e.target.value)}}})]),t("p",{staticClass:"control"},[t("a",{staticClass:"button is-primary",on:{click:function(e){return e.preventDefault(),a.filtrarUsuariosD()}}},[a._v(" Buscar por dependencia ")])])]),t("table",{staticClass:"table"},[a._m(0),this.usuariosBuscados.length>0?t("tbody",a._l(a.usuariosBuscados,(function(e){return t("tr",{key:e.email},[t("td",[a._v(a._s(e.nombres))]),t("td",[a._v(a._s(e.apellidos))]),t("td",[a._v(a._s(e.email))]),t("td",[a._v(a._s(e.dependencia))]),t("td",[a._v(a._s(e.validohasta))]),t("td",[a._v(a._s(e.activo))]),t("td",[t("button",{staticClass:"button is-primary",attrs:{type:"submit"},on:{click:function(t){return t.preventDefault(),a.editar(e)}}},[a._v("Editar")])]),t("td",[t("button",{staticClass:"button is-primary",attrs:{type:"submit"},on:{click:function(t){return t.preventDefault(),a.eliminar(e)}}},[a._v("Eliminar")])])])})),0):a._e(),0==this.usuariosBuscados.length?t("tbody",a._l(a.usuarios,(function(e){return t("tr",{key:e.email},[t("td",[a._v(a._s(e.nombres))]),t("td",[a._v(a._s(e.apellidos))]),t("td",[a._v(a._s(e.email))]),t("td",[a._v(a._s(e.dependencia))]),t("td",[a._v(a._s(e.validohasta))]),t("td",[a._v(a._s(e.activo))]),t("td",[t("button",{staticClass:"button is-primary",attrs:{type:"submit"},on:{click:function(t){return t.preventDefault(),a.editar(e)}}},[a._v("Editar")])]),t("td",[t("button",{staticClass:"button is-primary",attrs:{type:"submit"},on:{click:function(t){return t.preventDefault(),a.eliminar(e)}}},[a._v("Eliminar")])])])})),0):a._e()])])])])},Z=[function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("thead",[t("tr",[t("th",[a._v("Nombres")]),t("th",[a._v("Apellidos")]),t("th",[a._v("Email")]),t("th",[a._v("Dependencia")]),t("th",[a._v("Valido hasta")]),t("th",[a._v("Activo")]),t("th",[a._v("Editar")]),t("th",[a._v("Eliminar")])])])}],F=(t("4de4"),t("7db0"),t("caad"),t("ac1f"),t("2532"),t("841c"),{data:function(){return{isActive:"pictures",ref:B.collection("users"),usuario:{},usuarios:[],dependencias:[],dependenciatemp:"",error:"",search:"",searchd:"",usuariosBuscados:[]}},name:"Usuarios",created:function(){this.listarDependencias(),this.listarUsuarios()},methods:{filtrarUsuariosN:function(){var a=this;this.usuariosBuscados=this.usuarios.filter((function(e){return e.nombres.toLowerCase().includes(a.search.toLowerCase())}))},filtrarUsuariosD:function(){var a=this;this.usuariosBuscados=this.usuarios.filter((function(e){return e.dependencia.toLowerCase().includes(a.searchd.toLowerCase())}))},listarDependencias:function(){var a=this;return Object(V["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.collection("dependencias").get();case 3:t=e.sent,t.forEach((function(e){var t={id:e.id,nombre:e.data().nombre,coordinador:e.data().coordinador,maximo:e.data().maximo,ubicacion:e.data().ubicacion,activa:e.data().activa,users:e.data().users};console.log(a.dependencias),a.dependencias.push(t)})),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},listarUsuarios:function(){var a=this;return Object(V["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.collection("users").get();case 3:t=e.sent,a.usuarios.splice(0,a.usuarios.length),t.forEach((function(e){var t={id:e.id,nombres:e.data().nombres,apellidos:e.data().apellidos,email:e.data().email,password:e.data().password,dependencia:e.data().dependencia,validohasta:e.data().validohasta,activo:e.data().activo};a.usuarios.push(t)})),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},register:function(){var a=this;this.error="",this.usuario.nombres&&this.usuario.apellidos&&this.usuario.email&&this.usuario.password?c.a.auth().createUserWithEmailAndPassword(this.usuario.email,this.usuario.password).then((function(e){if(e){a.dependenciatemp=a.dependencias.find((function(e){return e.nombre===a.usuario.dependencia})),a.dependenciatemp.users.push({nombre:a.usuario.nombres,apellido:a.usuario.apellidos,email:a.usuario.email});var t=B.collection("dependencias").doc(a.dependenciatemp.id);t.set(a.dependenciatemp).then((function(a){console.log(a)})),a.ref.add(a.usuario).then((function(e){console.log(e),a.usuario.nombres="",a.usuario.apellidos="",a.usuario.email="",a.usuario.password="",a.usuario.validohasta="",a.usuario.dependencia="",a.usuario.activo=""})),a.listarUsuarios()}})).catch((function(e){a.error=e.message})):this.error="Todos los campos son requeridos"},editar:function(a){this.$router.push({name:"editarusr",params:{usractual:a}})},eliminar:function(a){this.ref.doc(a.id).delete(),this.listarUsuarios()}}}),G=F,X=(t("e2a8"),Object(p["a"])(G,Q,Z,!1,null,"79d854c1",null)),Y=X.exports,aa=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"container mt-50"},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-6 is-offset-3"},[t("h3",{staticClass:"title is-3"},[a._v("Información dependencia")]),t("hr"),t("form",{attrs:{action:"#"}},[t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("Nombre dependencia")]),t("div",{staticClass:"control"},[t("span",[a._v(a._s(a.dependenciaactual.nombre))])])]),t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("Coordinador")]),t("div",{staticClass:"control"},[t("span",[a._v(a._s(a.dependenciaactual.coordinador))])])]),t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("Máximo numero de usuarios")]),t("div",{staticClass:"control"},[t("span",[a._v(a._s(a.dependenciaactual.maximo))])])]),t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("Ubicacion")]),t("div",{staticClass:"control"},[t("span",[a._v(a._s(a.dependenciaactual.ubicacion))])])]),t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("Activa")]),t("div",{staticClass:"control"},[t("span",[a._v(a._s(a.dependenciaactual.activa))])])]),t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("Usuarios asociados")]),t("div",{staticClass:"control"},[t("table",{staticClass:"table"},[a._m(0),t("tbody",a._l(a.dependenciaactual.users,(function(e){return t("tr",{key:e.email},[t("td",[a._v(a._s(e.nombre))]),t("td",[a._v(a._s(e.apellido))]),t("td",[a._v(a._s(e.email))])])})),0)])])])]),a.error?t("div",{staticClass:"notification is-danger mt-10"},[a._v(" "+a._s(a.error)+" ")]):a._e()])])])},ea=[function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("thead",[t("tr",[t("th",[a._v("Nombre")]),t("th",[a._v("Apellido")]),t("th",[a._v("Email")])])])}],ta={data:function(){return{}},name:"Detalle",props:{dependenciaactual:{}}},ia=ta,sa=Object(p["a"])(ia,aa,ea,!1,null,null,null),na=sa.exports,ra=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"container mt-50"},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-6 is-offset-3"},[t("h3",{staticClass:"title is-3"},[a._v("Editar dependencia")]),t("hr"),t("form",{attrs:{action:"#"},on:{submit:function(e){return e.preventDefault(),a.register(e)}}},[t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("Nombre dependencia")]),t("div",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.dependenciaactual.nombre,expression:"dependenciaactual.nombre"}],staticClass:"input",attrs:{type:"text"},domProps:{value:a.dependenciaactual.nombre},on:{input:function(e){e.target.composing||a.$set(a.dependenciaactual,"nombre",e.target.value)}}})])]),t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("Coordinador")]),t("div",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.dependenciaactual.coordinador,expression:"dependenciaactual.coordinador"}],staticClass:"input",attrs:{type:"text"},domProps:{value:a.dependenciaactual.coordinador},on:{input:function(e){e.target.composing||a.$set(a.dependenciaactual,"coordinador",e.target.value)}}})])]),t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("Máximo número de usuarios")]),t("div",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.dependenciaactual.maximo,expression:"dependenciaactual.maximo"}],staticClass:"input",attrs:{type:"text"},domProps:{value:a.dependenciaactual.maximo},on:{input:function(e){e.target.composing||a.$set(a.dependenciaactual,"maximo",e.target.value)}}})])]),t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("Ubicación")]),t("div",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.dependenciaactual.ubicacion,expression:"dependenciaactual.ubicacion"}],staticClass:"input",attrs:{type:"text"},domProps:{value:a.dependenciaactual.ubicacion},on:{input:function(e){e.target.composing||a.$set(a.dependenciaactual,"ubicacion",e.target.value)}}})])]),t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("¿Dependencia activa?")]),t("div",{staticClass:"select"},[t("select",{directives:[{name:"model",rawName:"v-model",value:a.dependenciaactual.activa,expression:"dependenciaactual.activa"}],on:{change:function(e){var t=Array.prototype.filter.call(e.target.options,(function(a){return a.selected})).map((function(a){var e="_value"in a?a._value:a.value;return e}));a.$set(a.dependenciaactual,"activa",e.target.multiple?t:t[0])}}},[t("option",[a._v("Si")]),t("option",[a._v("No")])])])]),t("button",{staticClass:"button is-primary",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),a.actualizarDependencia(a.dependenciaactual)}}},[a._v("Actualizar dependencia")])]),a.error?t("div",{staticClass:"notification is-danger mt-10"},[a._v(" "+a._s(a.error)+" ")]):a._e()])])])},oa=[],la={data:function(){return{error:"",listdepen:[]}},created:function(){this.misdependencias()},name:"Editar",props:{dependenciaactual:{}},methods:{misdependencias:function(){var a=this;return Object(V["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,B.collection("dependencias").get();case 2:t=e.sent,t.forEach((function(e){var t={id:e.id,nombre:e.data().nombre,coordinador:e.data().coordinador,maximo:e.data().maximo,ubicacion:e.data().ubicacion,activa:e.data().activa};a.listdepen.push(t)}));case 4:case"end":return e.stop()}}),e)})))()},actualizarDependencia:function(a){var e=B.collection("dependencias").doc(a.id);e.set({nombre:a.nombre,coordinador:a.coordinador,maximo:a.maximo,ubicacion:a.ubicacion,activa:a.activa}),a.nombre="",a.coordinador="",a.maximo="",a.ubicacion="",a.activa="",alert("¡La dependencia se ha actualizado con exito! \nDirijase a la lista de dependencias para ver los cambios.")}}},ca=la,ua=Object(p["a"])(ca,ra,oa,!1,null,null,null),da=ua.exports,pa=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"container mt-50"},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-6 is-offset-3"},[t("h3",{staticClass:"title is-3"},[a._v("Editar usuario")]),t("hr"),t("form",{attrs:{action:"#"},on:{submit:function(e){return e.preventDefault(),a.register(e)}}},[t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("Nombres")]),t("div",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.usractual.nombres,expression:"usractual.nombres"}],staticClass:"input",attrs:{type:"text"},domProps:{value:a.usractual.nombres},on:{input:function(e){e.target.composing||a.$set(a.usractual,"nombres",e.target.value)}}})])]),t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("Apellidos")]),t("div",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.usractual.apellidos,expression:"usractual.apellidos"}],staticClass:"input",attrs:{type:"text"},domProps:{value:a.usractual.apellidos},on:{input:function(e){e.target.composing||a.$set(a.usractual,"apellidos",e.target.value)}}})])]),t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("E-mail")]),t("div",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.usractual.email,expression:"usractual.email"}],staticClass:"input",attrs:{type:"text"},domProps:{value:a.usractual.email},on:{input:function(e){e.target.composing||a.$set(a.usractual,"email",e.target.value)}}})])]),t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("Valido hasta")]),t("div",{staticClass:"control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.usractual.validohasta,expression:"usractual.validohasta"}],staticClass:"input",attrs:{type:"text"},domProps:{value:a.usractual.validohasta},on:{input:function(e){e.target.composing||a.$set(a.usractual,"validohasta",e.target.value)}}})])]),t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("Dependencia")]),t("div",{staticClass:"select"},[t("select",{directives:[{name:"model",rawName:"v-model",value:a.usractual.dependencia,expression:"usractual.dependencia"}],on:{change:function(e){var t=Array.prototype.filter.call(e.target.options,(function(a){return a.selected})).map((function(a){var e="_value"in a?a._value:a.value;return e}));a.$set(a.usractual,"dependencia",e.target.multiple?t:t[0])}}},a._l(a.dependencias,(function(e){return t("option",{key:e.id},[a._v(a._s(e.nombre))])})),0)])]),t("div",{staticClass:"field"},[t("label",{staticClass:"label"},[a._v("¿Activo?")]),t("div",{staticClass:"select"},[t("select",{directives:[{name:"model",rawName:"v-model",value:a.usractual.activo,expression:"usractual.activo"}],on:{change:function(e){var t=Array.prototype.filter.call(e.target.options,(function(a){return a.selected})).map((function(a){var e="_value"in a?a._value:a.value;return e}));a.$set(a.usractual,"activo",e.target.multiple?t:t[0])}}},[t("option",[a._v("Si")]),t("option",[a._v("No")])])])]),t("button",{staticClass:"button is-primary",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),a.actualizarUsuario(a.usractual)}}},[a._v("Actualizar usuario")]),a.error?t("div",{staticClass:"notification is-danger mt-10"},[a._v(" "+a._s(a.error)+" ")]):a._e()])])])])},va=[],ma={data:function(){return{error:"",dependencias:[],listusers:[]}},name:"Editarusr",props:{usractual:{}},created:function(){this.misDependencias(),this.misUsuarios()},methods:{misDependencias:function(){var a=this;return Object(V["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.collection("dependencias").get();case 3:t=e.sent,t.forEach((function(e){var t={id:e.id,nombre:e.data().nombre,coordinador:e.data().coordinador,maximo:e.data().maximo,ubicacion:e.data().ubicacion,activa:e.data().activa,users:e.data().users};console.log(a.dependencias),a.dependencias.push(t),console.log(a.dependencias)})),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},misUsuarios:function(){var a=this;return Object(V["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,B.collection("users").get();case 2:t=e.sent,t.forEach((function(e){var t={id:e.id,nombres:e.data().nombres,apellidos:e.data().apellidos,email:e.data().email,password:e.data().dependencia,dependencia:e.data().dependencia,validohasta:e.data().validohasta,activo:e.data().activo};a.listusers.push(t)}));case 4:case"end":return e.stop()}}),e)})))()},actualizarUsuario:function(a){var e=B.collection("users").doc(a.id);e.set({nombres:a.nombres,apellidos:a.apellidos,email:a.email,dependencia:a.dependencia,validohasta:a.validohasta,activo:a.activo}),a.nombres="",a.apellidos="",a.email="",a.dependencia="",a.validohasta="",a.activo="",alert("¡El usuario se ha actualizado con exito! \nDirijase a la lista de usuarios para ver los cambios.")}}},fa=ma,ba=Object(p["a"])(fa,pa,va,!1,null,null,null),ha=ba.exports;i["a"].use(_["a"]);var Ca=new _["a"]({routes:[{path:"/",name:"home",component:N},{path:"/login",name:"login",component:O},{path:"/register",name:"register",component:z},{path:"/dependencias",name:"dependencias",component:K,props:!0,meta:{requiresAuth:!0}},{path:"/detalle",name:"detalle",component:na,props:!0,meta:{requiresAuth:!0}},{path:"/editar",name:"editar",component:da,props:!0,meta:{requiresAuth:!0}},{path:"/editarusr",name:"editarusr",component:ha,props:!0,meta:{requiresAuth:!0}},{path:"/usuarios",name:"usuarios",component:Y,meta:{requiresAuth:!0}}]});Ca.beforeEach((function(a,e,t){if(a.matched.some((function(a){return a.meta.requiresAuth}))){var i=c.a.auth().currentUser;i?t():t({name:"login"})}else t()}));var _a=Ca;i["a"].config.productionTip=!1;var ga=null;c.a.auth().onAuthStateChanged((function(){ga||(ga=new i["a"]({router:_a,render:function(a){return a(C)}}).$mount("#app"))}))},"5c0b":function(a,e,t){"use strict";var i=t("9c0c"),s=t.n(i);s.a},"80ad":function(a,e,t){"use strict";var i=t("4fda"),s=t.n(i);s.a},"9c0c":function(a,e,t){},a659:function(a,e,t){},e2a8:function(a,e,t){"use strict";var i=t("39b9"),s=t.n(i);s.a}});
//# sourceMappingURL=app.7536699f.js.map